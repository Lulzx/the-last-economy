<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Intelligence Inversion</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&family=DM+Sans:ital,opsz,wght@0,9..40,100..900;1,9..40,100..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
body { background: #fafaf8; color: #1a1a1a; font-family: 'DM Sans', system-ui, sans-serif; margin: 0; }
.prose { max-width: 680px; margin: 0 auto; padding: 2rem 1.5rem; font-family: 'DM Sans', system-ui, sans-serif; line-height: 1.7; font-size: 1.05rem; }
.scrub { border-bottom: 2px dashed #2563eb; color: #2563eb; cursor: ew-resize; user-select: none; font-weight: 600; padding: 0 2px; }
.panel { background: white; border: 1px solid #e5e5e0; border-radius: 8px; padding: 1.5rem; margin: 2rem 0; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }
.panel-full { background: white; border-top: 1px solid #e5e5e0; border-bottom: 1px solid #e5e5e0; padding: 2rem; margin: 2rem -1.5rem; }
h1 { font-family: 'Playfair Display', Georgia, serif; font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; }
h2 { font-family: 'Playfair Display', Georgia, serif; font-size: 1.3rem; font-weight: 600; margin-top: 2rem; }
h3 { font-family: 'Playfair Display', Georgia, serif; }
.chapter-num { color: #888; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.5rem; }
.nav { display: flex; justify-content: space-between; padding: 1rem 1.5rem; border-bottom: 1px solid #e5e5e0; font-size: 0.9rem; }
.nav a { color: #2563eb; text-decoration: none; cursor: pointer; }
.nav a:hover { text-decoration: underline; }

svg text { font-family: 'DM Sans', system-ui, sans-serif; }
.era-label { font-size: 11px; fill: #555; }
.era-band { opacity: 0.25; transition: opacity 0.2s; }
.era-band.active { opacity: 0.55; }
.year-marker { cursor: ew-resize; }
.info-box { font-size: 0.95rem; color: #333; margin-top: 1rem; min-height: 2.5rem; }
.annotation { font-size: 11px; fill: #888; }
.cost-line { fill: none; stroke-width: 2.5; }
.calc-cols { display: flex; gap: 2rem; flex-wrap: wrap; }
.calc-col { flex: 1; min-width: 240px; }
.calc-col h3 { margin-top: 0; font-size: 1.1rem; }
.ratio-display { text-align: center; font-size: 2.5rem; font-weight: 700; color: #2563eb; margin: 1.5rem 0 0.5rem; }
.ratio-sub { text-align: center; font-size: 0.9rem; color: #888; }
input[type="range"] { width: 100%; accent-color: #2563eb; }
.slider-label { display: flex; justify-content: space-between; font-size: 0.85rem; color: #555; margin-top: 0.5rem; }
.cost-breakdown { font-size: 0.9rem; color: #555; margin-top: 0.75rem; line-height: 1.6; }

/* Enrichment styles */
.pullquote {
  border-left: 4px solid #2563eb;
  margin: 2rem 0;
  padding: 1rem 1.5rem;
  background: #eff6ff;
  border-radius: 0 8px 8px 0;
}
.pullquote p {
  font-size: 1.15rem;
  font-style: italic;
  color: #1e40af;
  margin: 0;
}
.pullquote cite {
  display: block;
  font-size: 0.85rem;
  color: #555;
  margin-top: 0.5rem;
  font-style: normal;
}
.stat-callout {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1.5rem;
  background: white;
  border: 1px solid #e5e5e0;
  border-radius: 8px;
  margin: 1.5rem 0;
  text-align: center;
}
.stat-number {
  font-family: 'Playfair Display', Georgia, serif;
  font-size: 3rem;
  font-weight: 700;
  color: #2563eb;
  line-height: 1;
}
.stat-label {
  font-size: 0.9rem;
  color: #555;
  margin-top: 0.5rem;
}
.stat-row {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}
.stat-row .stat-callout {
  flex: 1;
  min-width: 180px;
}
.section-divider {
  border: none;
  border-top: 1px solid #e5e5e0;
  margin: 3rem 0;
}
.inline-svg {
  display: flex;
  justify-content: center;
  margin: 2rem 0;
}
.inline-svg svg {
  max-width: 100%;
  height: auto;
}
</style>
</head>
<body>
<nav class="nav">
  <a href="introduction.html">&larr; Previous</a>
  <a href="explorables.html">All Chapters</a>
  <a href="02-harbingers.html">Next &rarr;</a>
</nav>

<div class="prose">
  <div class="chapter-num">Chapter 1</div>
  <h1>The Intelligence Inversion</h1>

  <blockquote class="pullquote">
    <p>"A new scientific truth does not triumph by convincing its opponents and making them see the light, but rather because its opponents eventually die, and a new generation grows up that is familiar with it."</p>
    <cite>-- Max Planck</cite>
  </blockquote>

  <h2>The Pattern That Breaks the World</h2>

  <p>In 1811, workers gathered in the dead of night near Nottingham. Their faces blackened with coal, their identities hidden, they moved with the precision of soldiers. These were the original Luddites. Contrary to the cartoon history we have been fed, they were not idiots afraid of progress. They were skilled artisans who understood exactly what was happening. The machinery was not just taking their jobs; it was making their entire way of being human obsolete.</p>

  <p>They smashed the frames not from ignorance but from clarity. They could see what the factory owners could not or would not. This was not just a new means of production. It was the end of the craftsman and the birth of the interchangeable worker. They were right about everything except the timeline. It took two hundred years, but the machines finally came for the mind.</p>

  <p>Four times in the last ten thousand years, the foundational source of economic value has inverted. Each time, the world did not just change. It broke and reformed into something unrecognizable. Civilizations that understood the shift thrived. Those that clung to the old rules became archaeological layers, cautionary tales told in business schools that themselves will not exist in a decade.</p>

  <p>We are living through the fourth and final inversion right now. It is happening one hundred times faster than any that came before. And unlike the others, this one offers no retreat.</p>

  <p>This is the year
    <span class="scrub" data-value="2026" data-min="2020" data-max="2030" data-step="1" data-update="updateYear">2026</span>,
    now <span id="years-into">2</span> years into a transition with no historical precedent.</p>

  <!-- Inline SVG: The Four Inversions Timeline -->
  <div class="inline-svg">
    <svg viewBox="0 0 600 170" width="600" xmlns="http://www.w3.org/2000/svg">
      <!-- Connecting line -->
      <line x1="75" y1="60" x2="525" y2="60" stroke="#e5e5e0" stroke-width="2"/>
      <!-- Era 1: Land -->
      <circle cx="75" cy="60" r="22" fill="#8B6914" opacity="0.15" stroke="#8B6914" stroke-width="2"/>
      <text x="75" y="65" text-anchor="middle" font-size="13" font-weight="700" fill="#8B6914">1</text>
      <text x="75" y="95" text-anchor="middle" font-size="12" font-weight="600" fill="#1a1a1a" font-family="'Playfair Display', Georgia, serif">Land</text>
      <text x="75" y="112" text-anchor="middle" font-size="9" fill="#888">10,000 yrs</text>
      <!-- Arrow -->
      <text x="140" y="65" text-anchor="middle" font-size="16" fill="#ccc">&rarr;</text>
      <!-- Era 2: Labor -->
      <circle cx="225" cy="60" r="22" fill="#2563eb" opacity="0.15" stroke="#2563eb" stroke-width="2"/>
      <text x="225" y="65" text-anchor="middle" font-size="13" font-weight="700" fill="#2563eb">2</text>
      <text x="225" y="95" text-anchor="middle" font-size="12" font-weight="600" fill="#1a1a1a" font-family="'Playfair Display', Georgia, serif">Labor</text>
      <text x="225" y="112" text-anchor="middle" font-size="9" fill="#888">~200 yrs</text>
      <!-- Arrow -->
      <text x="300" y="65" text-anchor="middle" font-size="16" fill="#ccc">&rarr;</text>
      <!-- Era 3: Capital -->
      <circle cx="375" cy="60" r="22" fill="#16a34a" opacity="0.15" stroke="#16a34a" stroke-width="2"/>
      <text x="375" y="65" text-anchor="middle" font-size="13" font-weight="700" fill="#16a34a">3</text>
      <text x="375" y="95" text-anchor="middle" font-size="12" font-weight="600" fill="#1a1a1a" font-family="'Playfair Display', Georgia, serif">Capital</text>
      <text x="375" y="112" text-anchor="middle" font-size="9" fill="#888">~50 yrs</text>
      <!-- Arrow -->
      <text x="450" y="65" text-anchor="middle" font-size="16" fill="#ccc">&rarr;</text>
      <!-- Era 4: Intelligence -->
      <circle cx="525" cy="60" r="22" fill="#d97706" opacity="0.15" stroke="#d97706" stroke-width="2"/>
      <text x="525" y="65" text-anchor="middle" font-size="13" font-weight="700" fill="#d97706">4</text>
      <text x="525" y="95" text-anchor="middle" font-size="12" font-weight="600" fill="#1a1a1a" font-family="'Playfair Display', Georgia, serif">Intelligence</text>
      <text x="525" y="112" text-anchor="middle" font-size="9" fill="#888">~5 yrs?</text>
      <!-- Acceleration label -->
      <text x="300" y="145" text-anchor="middle" font-size="10" fill="#555" font-style="italic">Each inversion happens faster than the last</text>
      <!-- Acceleration arrow -->
      <line x1="120" y1="135" x2="480" y2="135" stroke="#d97706" stroke-width="1" marker-end="url(#arrowhead)"/>
      <defs>
        <marker id="arrowhead" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
          <polygon points="0 0, 8 3, 0 6" fill="#d97706"/>
        </marker>
      </defs>
    </svg>
  </div>

  <div class="panel">
    <h2>The Five Eras</h2>
    <div id="timeline-chart"></div>
    <div class="info-box" id="timeline-info">Drag the marker across the timeline to explore each era.</div>
  </div>

  <h2>The First Inversion: When Land Stopped Being Everything</h2>

  <p>For ten millennia, the engine of civilization ran on a simple, brutal logic: control the land, control the world. Every empire from Sumer to Spain built itself on this equation. Land meant food. Food meant survival. Survival meant power. The Pharaohs measured their might in flood plains, the Romans in wheat fields.</p>

  <p>This was the age of <strong>Land Dominance</strong>. It created a specific kind of human. Peasants were literally tied to the land, serfs whose value was calculated in the acres they could work. The nobility were not just rich; they were ontologically different, their blood somehow transmuted by deed and title into something finer than the mud-covered masses.</p>

  <p>The first crack appeared in Venice, a city with no agricultural land to speak of. Instead, it became the richest city in Europe by realizing that controlling the <em>flow</em> of goods mattered more than controlling the land that produced them. Then, around 1750, everything accelerated. A Scottish instrument maker named James Watt added a separate condenser to a steam engine, a seemingly minor improvement that ended a world.</p>

  <blockquote class="pullquote">
    <p>"A brilliant merchant without land was now powerful; a foolish king with fertile fields was merely quaint."</p>
  </blockquote>

  <p>In Manchester, the future announced itself in smoke and suffering. Life expectancy in working-class neighborhoods dropped to seventeen years. But the mills produced more cloth in a day than a hundred villages in a year. The equation had inverted. The source of value had shifted from what you owned to what you could organize. From acres to factories, from soil to systems.</p>

  <hr class="section-divider">

  <h2>The Second Inversion: When Hands Became Obsolete</h2>

  <p>The age of <strong>Labor Dominance</strong> lasted two centuries, long enough to seem permanent. Unions formed. Rights were won. The eight-hour day, the weekend, the very concept that workers were humans rather than inputs. It seemed like a stable equilibrium.</p>

  <p>But even as the labor movement celebrated its victories, the ground was shifting again. In 1947, Bell Labs invented the transistor. By 1970, a computer could run a production line.</p>

  <div class="stat-callout">
    <span class="stat-number">100,000 &rarr; 6,000</span>
    <span class="stat-label">Ford's River Rouge workforce: 1930 vs. 1990 &mdash; same output, 94% fewer humans</span>
  </div>

  <p>The missing 94,000 did not find better jobs. They found no jobs. The machines did not just assist human labor; they replaced it. This was the age of <strong>Capital Dominance</strong>. A single engineer at Microsoft, leveraging the capital of software, could create more value than a thousand workers on an assembly line. Returns flowed not to those who worked hardest but to those who owned the means of production.</p>

  <hr class="section-divider">

  <h2>The Third Inversion: When Capital Itself Became Ephemeral</h2>

  <p>The transition from Labor to Capital was traumatic but comprehensible. You could see a factory. You could touch a machine. But around the year 2000, something stranger began happening. Capital itself began to dematerialize.</p>

  <!-- Inline SVG: Kodak vs Instagram -->
  <div class="inline-svg">
    <svg viewBox="0 0 500 180" width="500" xmlns="http://www.w3.org/2000/svg">
      <!-- Kodak side -->
      <rect x="30" y="20" width="180" height="140" rx="8" fill="#fef2f2" stroke="#ef4444" stroke-width="1.5"/>
      <text x="120" y="50" text-anchor="middle" font-size="13" font-weight="700" fill="#1a1a1a" font-family="'Playfair Display', Georgia, serif">Kodak (1998)</text>
      <!-- People icons (grid of dots) -->
      <g transform="translate(50, 60)">
        <text x="70" y="12" text-anchor="middle" font-size="36" font-weight="800" fill="#ef4444" font-family="'Playfair Display', Georgia, serif">170,000</text>
        <text x="70" y="32" text-anchor="middle" font-size="10" fill="#555">employees</text>
        <text x="70" y="56" text-anchor="middle" font-size="14" fill="#888">Worth $31B</text>
        <text x="70" y="74" text-anchor="middle" font-size="10" fill="#aaa">factories, labs, inventory</text>
      </g>
      <!-- VS -->
      <text x="250" y="100" text-anchor="middle" font-size="18" font-weight="700" fill="#ccc">vs</text>
      <!-- Instagram side -->
      <rect x="290" y="20" width="180" height="140" rx="8" fill="#eff6ff" stroke="#2563eb" stroke-width="1.5"/>
      <text x="380" y="50" text-anchor="middle" font-size="13" font-weight="700" fill="#1a1a1a" font-family="'Playfair Display', Georgia, serif">Instagram (2012)</text>
      <g transform="translate(310, 60)">
        <text x="70" y="12" text-anchor="middle" font-size="36" font-weight="800" fill="#2563eb" font-family="'Playfair Display', Georgia, serif">13</text>
        <text x="70" y="32" text-anchor="middle" font-size="10" fill="#555">employees</text>
        <text x="70" y="56" text-anchor="middle" font-size="14" fill="#888">Sold for $1B</text>
        <text x="70" y="74" text-anchor="middle" font-size="10" fill="#aaa">no factories, no inventory</text>
      </g>
    </svg>
  </div>

  <p>In 1998, Kodak employed 170,000 people and was worth thirty-one billion dollars. In 2012, Facebook bought Instagram for one billion dollars. Instagram had thirteen employees. No factories. No inventory. No physical products. Just the ability to organize human attention at scale.</p>

  <p>The entire photography industry evaporated in less than a decade. Not because people stopped taking pictures, but because they started taking infinite pictures. The scarcity that gave photos value vanished. WhatsApp sold for nineteen billion dollars with fifty-five employees, obliterating the global SMS industry and its hundreds of thousands of workers. Value had transformed into something new: not a thing to be sold, not a process to be repeated, but the invisible <strong>structure of the network itself.</strong></p>

  <hr class="section-divider">

  <h2>The Fourth Inversion: The Intelligence Event</h2>

  <p>Now we arrive at the present. The final inversion. The one from which there is no retreat.</p>

  <div class="stat-row">
    <div class="stat-callout">
      <span class="stat-number">5 days</span>
      <span class="stat-label">to reach 1 million users</span>
    </div>
    <div class="stat-callout">
      <span class="stat-number">100M</span>
      <span class="stat-label">users within 2 months</span>
    </div>
  </div>

  <p>On November 30, 2022, everything changed. OpenAI released ChatGPT to the public. The fastest adoption of any technology in human history. But the speed is not what matters. What matters is what it means. For all of human history, intelligence was a form of labor, scarce and locked inside human skulls. Now, for the first time, intelligence has become a form of capital. It can be copied infinitely. It improves recursively.</p>

  <blockquote class="pullquote">
    <p>"When the marginal cost of high-quality text approaches zero, the economics built for scarcity start to buckle."</p>
  </blockquote>

  <p>In early 2023, a typical U.S. writer earned about $35 an hour. API access to large models let you generate a 750-word draft for about six cents. That is not a productivity improvement. It is a new price regime for cognition.</p>

  <div class="panel">
    <h2>The Cost Cliff</h2>
    <div id="cost-chart"></div>
    <div class="info-box" id="cost-info"></div>
  </div>

  <h2>The Metabolic Rift</h2>

  <p>But the most profound change is not just that AI replaces the mind. It is that it introduces a new form of labor into the world with a completely different physical basis.</p>

  <p>For ten thousand years, all labor was performed by metabolic engines called human beings. We require sustenance, shelter, rest, and a complex social structure to function. Our economic value was inextricably tied to our biology. AI and robotics are <strong>non-metabolic labor</strong>. They require only electricity. They have no biology to support.</p>

  <blockquote class="pullquote">
    <p>"When our minds are out-competed by a form of labor that does not need to eat, sleep, or live, there is nowhere left to pivot."</p>
  </blockquote>

  <p>This is why this fourth inversion is final. When hands became obsolete, we pivoted to our minds. But when our minds are out-competed by a form of labor that does not need to eat, sleep, or live, there is nowhere left to pivot. We are not just facing a more efficient competitor; we are facing a different category of economic life.</p>

  <div class="panel">
    <h2>Metabolic Cost Calculator</h2>
    <div class="calc-cols">
      <div class="calc-col">
        <h3>Human</h3>
        <label class="slider-label"><span>Hours/week</span><span id="human-hours-val">40</span></label>
        <input type="range" id="human-hours" min="20" max="60" value="40">
        <div class="cost-breakdown" id="human-breakdown"></div>
      </div>
      <div class="calc-col">
        <h3>AI Equivalent</h3>
        <label class="slider-label"><span>Same task output</span><span id="ai-hours-val">40</span></label>
        <input type="range" id="ai-hours" min="20" max="60" value="40" disabled style="opacity:0.5">
        <div class="cost-breakdown" id="ai-breakdown"></div>
      </div>
    </div>
    <div class="ratio-display" id="ratio-val">50,000x</div>
    <div class="ratio-sub">cheaper per unit of cognitive output</div>
  </div>

  <hr class="section-divider">

  <h2>The Mathematics of Obsolescence</h2>

  <p>Here is the brutal math that no politician will speak aloud: for a growing majority of cognitive tasks, the economic value of a human is not just lower than an AI. It is negative.</p>

  <p>Consider the total cost of a knowledge worker: salary, benefits, office space, management overhead, training time, sick days, turnover risk. Now consider the cost of an AI: API fees and electricity. The AI works twenty-four seven at consistent quality. It never interprets your instructions as personal criticism. It does not need motivation. It does not form factions. It does not leave for better offers.</p>

  <div class="stat-callout">
    <span class="stat-number">13 years &rarr; pennies</span>
    <span class="stat-label">A radiologist trains for 13 years at $400K/year. AI diagnoses many cancers more accurately &mdash; for pennies per scan.</span>
  </div>

  <p>The AI gets better and cheaper. The human just gets tired. The S&amp;P 500 companies have already figured this out. That is why their revenues keep rising while their employee counts fall. They are not waiting for economic conditions to improve. They are waiting for the AI to get just a little bit better before they do not need you at all.</p>

  <hr class="section-divider">

  <h2>The Pivot Wall</h2>

  <p>Previous inversions always left humans somewhere to retreat. When land became less important than labor, humans became laborers. When labor became less important than capital, humans became knowledge workers. When knowledge work becomes less important than AI, humans become what?</p>

  <p>The standard answer is "creatives and caretakers." But last month, an AI-generated song topped the streaming charts. AI therapists report higher patient satisfaction than human ones in blind studies. The refuges keep shrinking. The more sophisticated answer is "AI trainers and supervisors." But this is transitional at best. AI systems are already training other AI systems.</p>

  <blockquote class="pullquote">
    <p>"Our children will find our economics as quaint as we find feudalism."</p>
  </blockquote>

  <p>The honest answer is that we do not know. For the first time in economic history, we face an inversion with no obvious landing place. We are the generation that will live through the discontinuity. The last humans to remember when human thought had economic value. The first to discover what comes after.</p>

  <hr class="section-divider">

  <h2>The Choice Hidden in the Crisis</h2>

  <p>We stand at a unique moment in history. We can see both shores: the old world we are leaving and the new world being born. We are the last generation that will remember scarcity as the fundamental economic fact. The last to equate work with worth. The last to believe that intelligence is inherently human.</p>

  <p>But we are also the first generation that gets to build what comes next. The first to imagine economics beyond scarcity. The first to define human value beyond economic utility. The first to ask not "How do we work?" but "Why do we exist?"</p>

  <p>That is the real inversion. Not just of economic systems but of existential assumptions. The machines have not just taken our jobs. They have freed us from the lie that we are our jobs.</p>

  <p>The Intelligence Inversion is not like the others. It is not just faster and more comprehensive. It is final. There will be no fifth inversion because there is nothing left to invert. When intelligence itself becomes abundant, and the labor that wields it becomes non-metabolic, the very concept of scarcity-based economics loses its meaning.</p>

  <blockquote class="pullquote">
    <p>"The Luddites were right to see clearly what was happening to their world. They were wrong to think destruction could stop the future. We have the chance to be both clear-eyed and constructive."</p>
  </blockquote>

  <p>But to do that, we must first understand the deep physics of the forces at play. We must see the different kinds of value flow that have shaped our past and will define our future. We must learn the language of the dying paradigm so we can recognize its lies.</p>

  <p>Time to shatter them all.</p>

</div>

<script>
// Scrub interaction
document.querySelectorAll('.scrub').forEach(el => {
  let startX, startVal;
  el.addEventListener('mousedown', e => {
    startX = e.clientX;
    startVal = parseFloat(el.dataset.value);
    const onMove = e => {
      const dx = e.clientX - startX;
      const step = parseFloat(el.dataset.step || 1);
      const min = parseFloat(el.dataset.min || 0);
      const max = parseFloat(el.dataset.max || 100);
      const newVal = Math.min(max, Math.max(min, startVal + Math.round(dx / 5) * step));
      el.dataset.value = newVal;
      el.textContent = newVal + (el.dataset.suffix || '');
      if (el.dataset.update) window[el.dataset.update](newVal);
    };
    const onUp = () => { document.removeEventListener('mousemove', onMove); document.removeEventListener('mouseup', onUp); };
    document.addEventListener('mousemove', onMove);
    document.addEventListener('mouseup', onUp);
    e.preventDefault();
  });
});

window.updateYear = function(val) {
  document.getElementById('years-into').textContent = val - 2024;
};

// -- Timeline --
(function() {
  const eras = [
    { name: 'Land', start: 1750, end: 1850, color: '#8B6914', who: 'Landowners' },
    { name: 'Labor', start: 1850, end: 1950, color: '#2563eb', who: 'Factory owners' },
    { name: 'Capital', start: 1950, end: 1990, color: '#16a34a', who: 'Investors & Corporations' },
    { name: 'Networks', start: 1990, end: 2020, color: '#7c3aed', who: 'Platform owners' },
    { name: 'Intelligence', start: 2020, end: 2035, color: '#d97706', who: 'AI deployers' }
  ];

  const container = document.getElementById('timeline-chart');
  const cw = container.clientWidth || 640;
  const w = Math.min(640, cw), h = 140, m = { top: 30, right: 20, bottom: 30, left: 20 };
  const svg = d3.select('#timeline-chart').append('svg')
    .attr('viewBox', `0 0 ${w} ${h}`)
    .style('width', '100%').style('max-width', '640px');

  const x = d3.scaleLinear().domain([1750, 2035]).range([m.left, w - m.right]);

  // Era bands
  svg.selectAll('.era-band')
    .data(eras).enter().append('rect')
    .attr('class', 'era-band')
    .attr('x', d => x(d.start)).attr('y', m.top)
    .attr('width', d => x(d.end) - x(d.start)).attr('height', h - m.top - m.bottom)
    .attr('fill', d => d.color)
    .attr('rx', 3);

  // Era labels
  svg.selectAll('.era-label')
    .data(eras).enter().append('text')
    .attr('class', 'era-label')
    .attr('x', d => (x(d.start) + x(d.end)) / 2)
    .attr('y', m.top - 8)
    .attr('text-anchor', 'middle')
    .text(d => d.name);

  // Axis
  svg.append('g')
    .attr('transform', `translate(0,${h - m.bottom})`)
    .call(d3.axisBottom(x).tickValues([1750, 1850, 1950, 1990, 2020, 2035]).tickFormat(d3.format('d')))
    .selectAll('text').style('font-size', '10px');

  // X-axis label
  svg.append('text')
    .attr('x', w / 2).attr('y', h - 2)
    .attr('text-anchor', 'middle').style('font-size', '11px').style('fill', '#888')
    .text('Year');

  // Draggable marker
  let markerYear = 1990;
  const marker = svg.append('g').attr('class', 'year-marker');
  marker.append('line')
    .attr('y1', m.top - 5).attr('y2', h - m.bottom + 5)
    .attr('stroke', '#e11d48').attr('stroke-width', 2.5);
  marker.append('circle')
    .attr('cy', m.top - 5).attr('r', 6)
    .attr('fill', '#e11d48').attr('stroke', 'white').attr('stroke-width', 2);

  function updateMarker(yr) {
    markerYear = yr;
    marker.attr('transform', `translate(${x(yr)},0)`);
    const era = eras.find(e => yr >= e.start && yr < e.end) || eras[eras.length - 1];
    svg.selectAll('.era-band').classed('active', d => d === era);
    document.getElementById('timeline-info').innerHTML =
      `In <strong>${Math.round(yr)}</strong>: dominant value source = <strong>${era.name}</strong>. Power held by: <strong>${era.who}</strong>`;
  }
  updateMarker(markerYear);

  const drag = d3.drag()
    .on('drag', e => {
      const yr = Math.max(1750, Math.min(2035, x.invert(e.x)));
      updateMarker(yr);
    });
  marker.call(drag);
})();

// -- Cost Cliff --
(function() {
  const humanData = d3.range(2000, 2025).map(y => ({ year: y, cost: 0.05 + Math.sin(y * 2.7) * 0.01 + 0.015 }));
  const aiData = [
    { year: 2020, cost: 0.04 },
    { year: 2021, cost: 0.015 },
    { year: 2022, cost: 0.006 },
    { year: 2023, cost: 0.002 },
    { year: 2024, cost: 0.0003 }
  ];

  const container = document.getElementById('cost-chart');
  const cw = container.clientWidth || 640;
  const w = Math.min(640, cw), h = 280, m = { top: 20, right: 30, bottom: 50, left: 55 };
  const svg = d3.select('#cost-chart').append('svg')
    .attr('viewBox', `0 0 ${w} ${h}`)
    .style('width', '100%').style('max-width', '640px');

  const x = d3.scaleLinear().domain([2000, 2024]).range([m.left, w - m.right]);
  const y = d3.scaleLog().domain([0.0001, 0.15]).range([h - m.bottom, m.top]);

  svg.append('g').attr('transform', `translate(0,${h - m.bottom})`)
    .call(d3.axisBottom(x).tickFormat(d3.format('d')).ticks(6))
    .selectAll('text').style('font-size', '10px');
  svg.append('g').attr('transform', `translate(${m.left},0)`)
    .call(d3.axisLeft(y).ticks(4, '.4f'))
    .selectAll('text').style('font-size', '10px');

  // X-axis label
  svg.append('text')
    .attr('x', (m.left + w - m.right) / 2).attr('y', h - 8)
    .attr('text-anchor', 'middle').style('font-size', '11px').style('fill', '#888')
    .text('Year');

  // Y-axis label
  svg.append('text').attr('transform', `rotate(-90)`).attr('x', -(h/2)).attr('y', 14)
    .attr('text-anchor', 'middle').style('font-size', '11px').style('fill', '#888')
    .text('$/word (log scale)');

  const line = d3.line().x(d => x(d.year)).y(d => y(d.cost)).curve(d3.curveMonotoneX);

  svg.append('path').datum(humanData).attr('class', 'cost-line')
    .attr('d', line).attr('stroke', '#ef4444');
  svg.append('path').datum(aiData).attr('class', 'cost-line')
    .attr('d', line).attr('stroke', '#2563eb');

  // Legend
  [['Human writer', '#ef4444', 0], ['AI generation', '#2563eb', 1]].forEach(([label, col, i]) => {
    const g = svg.append('g').attr('transform', `translate(${m.left + 10},${m.top + 10 + i * 18})`);
    g.append('line').attr('x2', 20).attr('stroke', col).attr('stroke-width', 2.5);
    g.append('text').attr('x', 25).attr('y', 4).text(label).style('font-size', '11px').style('fill', '#555');
  });

  // Annotations
  [[2020, 0.04, 'GPT-3'], [2023, 0.002, 'GPT-4']].forEach(([yr, c, label]) => {
    svg.append('text').attr('class', 'annotation')
      .attr('x', x(yr) + 5).attr('y', y(c) - 8).text(label);
    svg.append('circle').attr('cx', x(yr)).attr('cy', y(c)).attr('r', 3).attr('fill', '#2563eb');
  });

  // Draggable year marker
  let markerYr = 2012;
  const marker = svg.append('g').style('cursor', 'ew-resize');
  marker.append('line').attr('y1', m.top).attr('y2', h - m.bottom)
    .attr('stroke', '#888').attr('stroke-width', 1.5).attr('stroke-dasharray', '4,3');
  marker.append('circle').attr('cy', m.top).attr('r', 5)
    .attr('fill', '#888').attr('stroke', 'white').attr('stroke-width', 2);

  function updateCostMarker(yr) {
    markerYr = yr;
    marker.attr('transform', `translate(${x(yr)},0)`);
    const hc = humanData.find(d => d.year === Math.round(yr));
    const ac = aiData.find(d => d.year === Math.round(yr));
    let info = `<strong>${Math.round(yr)}</strong>: Human ~$${hc ? hc.cost.toFixed(3) : '0.060'}/word`;
    if (ac) info += ` | AI ~$${ac.cost.toFixed(5)}/word | Ratio: ${Math.round((hc ? hc.cost : 0.06) / ac.cost)}x`;
    document.getElementById('cost-info').innerHTML = info;
  }
  updateCostMarker(markerYr);

  marker.call(d3.drag().on('drag', e => {
    updateCostMarker(Math.max(2000, Math.min(2024, x.invert(e.x))));
  }));
})();

// -- Metabolic Cost Calculator --
(function() {
  const hoursSlider = document.getElementById('human-hours');
  const aiSlider = document.getElementById('ai-hours');

  function update() {
    const hrs = parseInt(hoursSlider.value);
    aiSlider.value = hrs;
    document.getElementById('human-hours-val').textContent = hrs;
    document.getElementById('ai-hours-val').textContent = hrs;

    const hourlyRate = 50;
    const weeklyHuman = hrs * hourlyRate;
    const annualHuman = weeklyHuman * 52;
    const benefits = Math.round(annualHuman * 0.3);
    const totalHuman = annualHuman + benefits;

    const aiRate = 0.001;
    const weeklyAI = hrs * aiRate;
    const annualAI = weeklyAI * 52;

    document.getElementById('human-breakdown').innerHTML =
      `Salary: ${hrs}h &times; $${hourlyRate}/hr &times; 52 = <strong>$${annualHuman.toLocaleString()}</strong><br>` +
      `Benefits (30%): <strong>$${benefits.toLocaleString()}</strong><br>` +
      `Total: <strong>$${totalHuman.toLocaleString()}/yr</strong>`;

    document.getElementById('ai-breakdown').innerHTML =
      `Compute: ${hrs}h &times; $${aiRate}/hr &times; 52 = <strong>$${annualAI.toFixed(2)}</strong><br>` +
      `Benefits: <strong>$0</strong><br>` +
      `Total: <strong>$${annualAI.toFixed(2)}/yr</strong>`;

    const ratio = Math.round(totalHuman / annualAI);
    document.getElementById('ratio-val').textContent = ratio.toLocaleString() + 'x';
  }

  hoursSlider.addEventListener('input', update);
  update();
})();
</script>
</body>
</html>
