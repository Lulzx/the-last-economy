<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ch 8 — The MIND Dashboard</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&family=DM+Sans:ital,opsz,wght@0,9..40,100..900;1,9..40,100..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
body { background: #fafaf8; color: #1a1a1a; font-family: 'DM Sans', system-ui, sans-serif; margin: 0; }
.prose { max-width: 680px; margin: 0 auto; padding: 2rem 1.5rem; font-family: 'DM Sans', system-ui, sans-serif; line-height: 1.7; font-size: 1.05rem; }
.scrub { border-bottom: 2px dashed #2563eb; color: #2563eb; cursor: ew-resize; user-select: none; font-weight: 600; padding: 0 2px; }
.panel { background: white; border: 1px solid #e5e5e0; border-radius: 8px; padding: 1.5rem; margin: 2rem 0; box-shadow: 0 1px 3px rgba(0,0,0,0.08); transition: box-shadow 0.2s, transform 0.2s; }
.panel:hover { box-shadow: 0 4px 16px rgba(0,0,0,0.1); transform: translateY(-1px); }
h1 { font-family: 'Playfair Display', Georgia, serif; font-size: clamp(1.8rem, 5vw, 2.6rem); font-weight: 700; margin-bottom: 0.5rem; }
h2 { font-family: 'Playfair Display', Georgia, serif; font-size: 1.3rem; font-weight: 600; margin-top: 2rem; }
.chapter-num { color: #888; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.1em; }
.nav { display: flex; justify-content: space-between; padding: 1rem 1.5rem; border-bottom: 1px solid #e5e5e0; font-size: 0.9rem; position: sticky; top: 0; background: rgba(250,250,248,0.95); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); z-index: 50; }
.nav a { color: #2563eb; text-decoration: none; transition: color 0.15s; }
.nav a:hover { color: #1d4ed8; }

.dials-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
.dial-wrap { text-align: center; }
.dial-label { font-size: 0.9rem; font-weight: 600; margin-top: 0.3rem; }
.dial-value { font-size: 1.5rem; font-weight: 700; color: #2563eb; }

.vitality-display { text-align: center; margin: 1.5rem 0; }
.vitality-num { font-size: 2.5rem; font-weight: 800; }
.vitality-formula { font-size: 0.85rem; color: #888; margin-top: 0.25rem; font-family: 'DM Mono', monospace; }
.health-bar { height: 16px; background: #e5e5e0; border-radius: 8px; margin: 1rem auto; max-width: 400px; overflow: hidden; }
.health-fill { height: 100%; border-radius: 8px; transition: all 0.4s; }
.collapse-warn { color: #dc2626; font-weight: 700; font-size: 1.1rem; text-align: center; min-height: 1.5em; margin-top: 0.5rem; }

.multiplicative-collapse-banner {
  display: none;
  background: #fef2f2;
  border: 1.5px solid #dc2626;
  border-radius: 8px;
  color: #dc2626;
  font-weight: 600;
  font-size: 0.95rem;
  padding: 0.75rem 1rem;
  text-align: center;
  margin-top: 1rem;
}
.multiplicative-collapse-banner.visible { display: block; }

.civ-btns { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem; }
.civ-btn { padding: 0.4rem 0.9rem; border: 1.5px solid #2563eb; border-radius: 6px; background: white; color: #2563eb; cursor: pointer; font-size: 0.85rem; font-weight: 500; transition: all 0.2s; font-family: 'DM Sans', system-ui, sans-serif; }
.civ-btn.active { background: #2563eb; color: white; border-color: #2563eb; }
.civ-btn:hover { background: #2563eb; color: white; }
.civ-desc { font-size: 0.9rem; color: #555; min-height: 2.5em; margin-top: 0.75rem; }

.model-toggle { display: flex; align-items: center; gap: 1rem; justify-content: center; margin-bottom: 1rem; }
.toggle-switch { width: 56px; height: 28px; background: #2563eb; border-radius: 14px; position: relative; cursor: pointer; transition: background 0.3s; }
.toggle-switch.right { background: #7c3aed; }
.toggle-knob { width: 24px; height: 24px; background: white; border-radius: 12px; position: absolute; top: 2px; left: 2px; transition: left 0.3s; box-shadow: 0 1px 3px rgba(0,0,0,0.2); }
.toggle-switch.right .toggle-knob { left: 30px; }
.model-result { text-align: center; }
.model-score { font-size: 2rem; font-weight: 800; }
.model-verdict { font-size: 1.1rem; font-weight: 600; margin-top: 0.25rem; }
.bar-chart { display: flex; align-items: flex-end; justify-content: center; gap: 0.75rem; height: 120px; margin: 1rem 0; }
.bar-item { display: flex; flex-direction: column; align-items: center; }
.bar-rect { width: 80px; border-radius: 4px 4px 0 0; transition: height 0.5s, background 0.5s; }
.bar-label { font-size: 0.75rem; margin-top: 0.3rem; }

.scale-toggle { display: flex; align-items: center; gap: 1rem; justify-content: center; margin-bottom: 1rem; }

.btn { display: inline-block; padding: 0.5rem 1.2rem; background: #2563eb; color: white; border: none; border-radius: 6px; font-size: 0.85rem; font-weight: 600; cursor: pointer; font-family: 'DM Sans', system-ui, sans-serif; transition: background 0.2s; }
.btn:hover { background: #1d4ed8; }

.reset-row { text-align: center; margin-top: 1rem; }

input[type=range] { accent-color: #2563eb; }

/* Enrichment styles */
.pullquote { border-left: 5px solid #2563eb; margin: 2rem 0; padding: 1rem 1.5rem; background: #eff6ff; border-radius: 0 8px 8px 0; box-shadow: 0 2px 8px rgba(37,99,235,0.08); }
.pullquote p { font-size: 1.15rem; font-style: italic; color: #1e40af; margin: 0; }
.pullquote cite { display: block; font-size: 0.85rem; color: #555; margin-top: 0.5rem; font-style: normal; }
.stat-callout { display: flex; flex-direction: column; align-items: center; padding: 1.5rem; background: white; border: 1px solid #e5e5e0; border-radius: 8px; margin: 1.5rem 0; text-align: center; }
.stat-number { font-family: 'Playfair Display', Georgia, serif; font-size: 3rem; font-weight: 700; color: #2563eb; line-height: 1; }
.stat-label { font-size: 0.9rem; color: #555; margin-top: 0.5rem; }
.section-divider { border: none; border-top: 1px solid #e5e5e0; margin: 3rem 0; }
.stat-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
.capital-card { background: white; border: 1px solid #e5e5e0; border-radius: 8px; padding: 1.25rem; margin: 0.75rem 0; }
.capital-card h3 { font-family: 'Playfair Display', Georgia, serif; font-size: 1.1rem; margin: 0 0 0.5rem 0; }
.capital-card .lesson { font-size: 0.9rem; color: #555; margin-top: 0.5rem; }
.capital-card .lesson strong { color: #1a1a1a; }
.svg-illustration { text-align: center; margin: 2rem 0; }

.progress-bar { position: fixed; top: 0; left: 0; height: 3px; background: #2563eb; z-index: 100; transition: width 0.1s; width: 0%; }

@media (max-width: 640px) {
  .panel-full { margin: 2rem 0; border-radius: 8px; border: 1px solid #e5e5e0; }
  .stat-row { flex-direction: column; }
  .calc-cols { flex-direction: column; }
  .gauges { grid-template-columns: 1fr !important; }
  .grid-container { grid-template-columns: repeat(4, 44px) !important; }
  .decade-btn { font-size: 0.8rem; padding: 0.3rem 0.6rem; }
  h1 { font-size: clamp(1.6rem, 7vw, 2.2rem); }
  .ratio-display { font-size: 2rem; }
  .stat-number { font-size: 2.2rem; }
  .year-toggle { flex-wrap: wrap; }
  .year-toggle button { flex: 1; min-width: 80px; }
}

@media (max-width: 480px) {
  .prose { font-size: 1rem; padding: 1.5rem 1rem; }
}
</style>
</head>
<body>
<div class="progress-bar" id="progress-bar"></div>
<nav class="nav">
  <a href="generative-engine.html">&larr; Previous</a>
  <a href="explorables.html">All Chapters</a>
  <a href="06-three-flows.html">Next &rarr;</a>
</nav>
<div class="prose">
  <div class="chapter-num">Chapter 8</div>
  <h1>The MIND of a Civilization</h1>

  <div class="pullquote">
    <p>"Civilization is a movement and not a condition, a voyage and not a harbor."</p>
    <cite>&mdash; Arnold J. Toynbee</cite>
  </div>

  <h2>The Search for Sanity</h2>
  <p>The Babylonians measured wealth in barley. The Egyptians measured flood levels of the Nile. The British Empire measured in naval tonnage. We measure in dollars.</p>
  <p>Each civilization's measurement system perfectly captures what matters to it, right before it kills them. The Babylonians' granaries could not measure the iron weapons of their conquerors. The Egyptians' flood markers could not predict the arrival of the Sea Peoples. The British counted battleships while America was inventing a new form of capitalism. We count transactions while the world reinvents value itself.</p>
  <p>The search for what to measure is the search for what matters. And what matters is not what moves through the system but what allows the system to persist. Not the water in the river, but the health of the riverbed that shapes its flow. Not the transactions, but the capacity for transformation.</p>

  <hr class="section-divider">

  <h2>The Discovery in Costa Rica</h2>
  <p>In 1948, Costa Rica did something unprecedented. They abolished their military. The generals said they were committing suicide. The economists said they were wasting resources. Instead, something strange happened. The money that would have bought tanks bought teachers. The energy that would have trained soldiers trained doctors. The land that would have been military bases became national parks.</p>

  <div class="stat-row">
    <div class="stat-callout">
      <div class="stat-number">1948</div>
      <div class="stat-label">Year Costa Rica abolished its military</div>
    </div>
    <div class="stat-callout">
      <div class="stat-number">1990</div>
      <div class="stat-label">First tropical country to reverse deforestation</div>
    </div>
  </div>

  <p>They began to measure different things: literacy rates, forest coverage, health outcomes, biodiversity. By 1990, Costa Rica had reversed deforestation &mdash; the first tropical country to do so. A standing forest providing watershed services, ecotourism, and carbon sequestration was worth more than lumber &mdash; but only if you measured the right things.</p>
  <p>They discovered that a civilization's health depends on a balanced portfolio of different kinds of wealth. Ignore any one of them, and you are flying blind.</p>

  <!-- SVG: Measurement evolution -->
  <div class="svg-illustration">
    <svg width="480" height="100" viewBox="0 0 480 100" fill="none" xmlns="http://www.w3.org/2000/svg">
      <line x1="40" y1="50" x2="440" y2="50" stroke="#e5e5e0" stroke-width="2"/>
      <circle cx="80" cy="50" r="18" fill="#eff6ff" stroke="#2563eb" stroke-width="1.5"/>
      <text x="80" y="55" text-anchor="middle" font-size="10" font-family="DM Sans, system-ui" fill="#2563eb" font-weight="600">Barley</text>
      <text x="80" y="82" text-anchor="middle" font-size="9" font-family="DM Sans, system-ui" fill="#888">Babylon</text>
      <circle cx="190" cy="50" r="18" fill="#eff6ff" stroke="#2563eb" stroke-width="1.5"/>
      <text x="190" y="55" text-anchor="middle" font-size="10" font-family="DM Sans, system-ui" fill="#2563eb" font-weight="600">Floods</text>
      <text x="190" y="82" text-anchor="middle" font-size="9" font-family="DM Sans, system-ui" fill="#888">Egypt</text>
      <circle cx="300" cy="50" r="18" fill="#eff6ff" stroke="#2563eb" stroke-width="1.5"/>
      <text x="300" y="55" text-anchor="middle" font-size="10" font-family="DM Sans, system-ui" fill="#2563eb" font-weight="600">Ships</text>
      <text x="300" y="82" text-anchor="middle" font-size="9" font-family="DM Sans, system-ui" fill="#888">Britain</text>
      <circle cx="410" cy="50" r="22" fill="#2563eb" stroke="#2563eb" stroke-width="1.5"/>
      <text x="410" y="46" text-anchor="middle" font-size="9" font-family="DM Sans, system-ui" fill="white" font-weight="600">MIND</text>
      <text x="410" y="58" text-anchor="middle" font-size="8" font-family="DM Sans, system-ui" fill="white">M x I x N x D</text>
      <text x="410" y="82" text-anchor="middle" font-size="9" font-family="DM Sans, system-ui" fill="#888">Symbioism</text>
      <polygon points="135,50 145,45 145,55" fill="#2563eb"/>
      <polygon points="245,50 255,45 255,55" fill="#2563eb"/>
      <polygon points="350,50 360,45 360,55" fill="#2563eb"/>
    </svg>
  </div>

  <hr class="section-divider">

  <h2>The Four Capitals Revealed</h2>
  <p>This framework emerged not from theory but from observing what actually allows systems to persist. Every thriving civilization, every resilient ecosystem, every antifragile organization maintains four distinct but interdependent forms of capital. They are the direct, measurable expressions of the Three Laws of a Living System.</p>

  <div class="capital-card" style="border-left: 4px solid #ef4444;">
    <h3 style="color: #ef4444;">M &mdash; Material Capital: The Physical Foundation</h3>
    <p>The organized matter and available energy that form the substrate of existence. Not just "stuff," but stuff in useful configurations. A pile of silicon is material; a microchip is Material Capital. A forest is material; a sustainably managed watershed is Material Capital.</p>
    <div class="lesson"><strong>The Incan Lesson:</strong> Their agricultural terraces turned vertical mountainsides into productive land that lasted for centuries, still feeding people today. They measured not in acres but in production potential.</div>
    <div class="lesson"><strong>The Modern Mistake:</strong> We measure the depletion of oil reserves as an increase in GDP. We confuse the liquidation of our planet's balance sheet with income.</div>
  </div>

  <div class="capital-card" style="border-left: 4px solid #2563eb;">
    <h3 style="color: #2563eb;">I &mdash; Intelligence Capital: The Pattern Library</h3>
    <p>The accumulated ability to solve problems, recognize patterns, and create value. It includes everything from scientific knowledge to cultural wisdom, from technical skills to artistic traditions. It is the only form of capital that grows when shared.</p>
    <div class="lesson"><strong>The Alexandrian Lesson:</strong> The Library of Alexandria did not just collect scrolls; they built the ancient world's Google. When it burned, humanity forgot how to make concrete for a thousand years.</div>
    <div class="lesson"><strong>The Modern Mistake:</strong> We are drowning in data while starving for wisdom. The real measure is not how much you know, but how well you can learn and adapt.</div>
  </div>

  <div class="capital-card" style="border-left: 4px solid #22c55e;">
    <h3 style="color: #22c55e;">N &mdash; Network Capital: The Connection Infrastructure</h3>
    <p>The trust, relationships, and communication channels that allow all other capitals to flow. High Network Capital means low transaction costs, rapid information spread, and collective resilience.</p>
    <div class="lesson"><strong>The Venetian Lesson:</strong> The Venetians built an empire on Network Capital. A merchant's word in Cairo was as good as gold because breaking it meant exclusion from the network &mdash; a fate worse than death.</div>
    <div class="lesson"><strong>The Modern Mistake:</strong> We build "social networks" that are actually attention extraction machines, designed to create engagement through outrage, which systematically destroys the social trust that constitutes real Network Capital.</div>
  </div>

  <div class="capital-card" style="border-left: 4px solid #f59e0b;">
    <h3 style="color: #f59e0b;">D &mdash; Diversity Capital: The Option Portfolio</h3>
    <p>The variety of approaches, perspectives, and possibilities maintained by the system. Not diversity for its own sake but diversity as insurance against uncertainty. This is the capital of what Nassim Nicholas Taleb calls antifragility: the quality of a system that gains from disorder.</p>
    <div class="lesson"><strong>The Incan Lesson, Revisited:</strong> While the global banana industry collapsed with its single fragile variety, the Inca cultivated three thousand varieties of potato in the Andes. When one failed, others survived. They optimized not for global export but for persistence.</div>
    <div class="lesson"><strong>The Modern Mistake:</strong> We have created a global monoculture in the name of efficiency and act surprised when it proves catastrophically fragile.</div>
  </div>

  <div class="stat-callout">
    <div class="stat-number">3,000</div>
    <div class="stat-label">Varieties of potato cultivated by the Inca &mdash; diversity as antifragility</div>
  </div>

  <hr class="section-divider">

  <h2>The Four Capital Dials</h2>
  <p>Drag the dials below to explore how each capital dimension affects civilizational vitality. Watch what happens when any single dimension approaches zero.</p>
  <div class="panel" id="dialsPanel">
    <div class="dials-grid">
      <div class="dial-wrap"><svg id="dialM" width="160" height="160"></svg><div class="dial-label" id="labelM">Material Capital</div><div class="dial-value" id="valM">70</div></div>
      <div class="dial-wrap"><svg id="dialI" width="160" height="160"></svg><div class="dial-label" id="labelI">Intellectual Capital</div><div class="dial-value" id="valI">70</div></div>
      <div class="dial-wrap"><svg id="dialN" width="160" height="160"></svg><div class="dial-label" id="labelN">Natural Capital</div><div class="dial-value" id="valN">70</div></div>
      <div class="dial-wrap"><svg id="dialD" width="160" height="160"></svg><div class="dial-label" id="labelD">Democratic Capital</div><div class="dial-value" id="valD">70</div></div>
    </div>
    <div class="vitality-display">
      <div class="vitality-num" id="vitalityNum">2,401</div>
      <div class="vitality-formula" id="vitalityFormula">70 &times; 70 &times; 70 &times; 70 / 10&#x2076; = 2,401</div>
      <div class="health-bar"><div class="health-fill" id="healthFill"></div></div>
      <div class="collapse-warn" id="collapseWarn"></div>
      <div class="multiplicative-collapse-banner" id="collapseBanner">Warning: Multiplicative collapse risk detected</div>
    </div>
    <div class="reset-row">
      <button class="btn" id="resetBtn">Reset</button>
    </div>
  </div>

  <hr class="section-divider">

  <h2>The Multiplication Principle</h2>
  <p>Here is the crucial insight that changes everything. These four capitals do not add. They <strong>multiply</strong>.</p>

  <div class="pullquote">
    <p>M &times; I &times; N &times; D = Civilizational Vitality. A zero in any category equals total system failure, regardless of the other three.</p>
  </div>

  <p>The multiplication forces balance. The Soviet Union had massive Material Capital and impressive Intelligence Capital. But their Network Capital was poisoned by mistrust and their Diversity Capital was systematically eliminated by central planning. The multiplication by near-zero doomed them.</p>
  <p>This framework is not an ideology. It is a diagnostic tool. It allows us to look at any system &mdash; from a person to a planet &mdash; and ask four simple questions: Is it regenerating its material base? Is it learning and sharing knowledge? Is it strengthening its connections? Is it maintaining its options?</p>

  <!-- SVG: Multiplication vs Addition -->
  <div class="svg-illustration">
    <svg width="400" height="120" viewBox="0 0 400 120" fill="none" xmlns="http://www.w3.org/2000/svg">
      <!-- Additive side -->
      <rect x="10" y="10" width="180" height="100" rx="8" fill="white" stroke="#e5e5e0" stroke-width="1"/>
      <text x="100" y="32" text-anchor="middle" font-size="11" font-family="DM Sans, system-ui" fill="#888" font-weight="600">ADDITIVE</text>
      <text x="100" y="55" text-anchor="middle" font-size="12" font-family="DM Mono, monospace" fill="#1a1a1a">80 + 80 + 80 + 5</text>
      <text x="100" y="75" text-anchor="middle" font-size="16" font-family="Playfair Display, serif" fill="#22c55e" font-weight="700">= 245 / 400 (61%)</text>
      <text x="100" y="96" text-anchor="middle" font-size="10" font-family="DM Sans, system-ui" fill="#888">"Looks fine"</text>
      <!-- Multiplicative side -->
      <rect x="210" y="10" width="180" height="100" rx="8" fill="white" stroke="#dc2626" stroke-width="1.5"/>
      <text x="300" y="32" text-anchor="middle" font-size="11" font-family="DM Sans, system-ui" fill="#dc2626" font-weight="600">MULTIPLICATIVE</text>
      <text x="300" y="55" text-anchor="middle" font-size="12" font-family="DM Mono, monospace" fill="#1a1a1a">80 x 80 x 80 x 5</text>
      <text x="300" y="75" text-anchor="middle" font-size="16" font-family="Playfair Display, serif" fill="#dc2626" font-weight="700">= 2.56 (0.03%)</text>
      <text x="300" y="96" text-anchor="middle" font-size="10" font-family="DM Sans, system-ui" fill="#dc2626">"Collapse imminent"</text>
    </svg>
  </div>

  <hr class="section-divider">

  <h2>Historical Civilizations</h2>
  <p>Select a civilization to load its capital profile into the dials above. Notice how the multiplicative model reveals vulnerabilities that a simple sum would hide.</p>
  <div class="panel">
    <div class="civ-btns">
      <button class="civ-btn" data-civ="venice">Venice 1400</button>
      <button class="civ-btn" data-civ="song">Song Dynasty 1100</button>
      <button class="civ-btn" data-civ="soviet">Soviet Union 1970</button>
      <button class="civ-btn" data-civ="costarica">Costa Rica 2020</button>
      <button class="civ-btn" data-civ="usa">USA 2024</button>
      <button class="civ-btn" data-civ="custom">Custom</button>
    </div>
    <div class="civ-desc" id="civDesc">Select a civilization to explore its capital profile.</div>
  </div>

  <h2>Sum vs Product Model</h2>
  <p>Toggle between the additive and multiplicative models to see how each evaluates the current dial settings. The additive model hides fragility; the multiplicative model exposes it.</p>
  <div class="panel">
    <div class="model-toggle">
      <span style="font-weight:600">Additive</span>
      <div class="toggle-switch" id="modelToggle"><div class="toggle-knob"></div></div>
      <span style="font-weight:600">Multiplicative</span>
    </div>
    <div class="model-result">
      <div class="model-score" id="modelScore">225 / 400</div>
      <div class="model-verdict" id="modelVerdict">Doing OK (56%)</div>
    </div>
    <div class="bar-chart" id="barChart"></div>
    <p style="font-size:0.9rem;text-align:center;color:#888;" id="modelInsight">The additive model hides single-point failures by averaging away collapse risks.</p>
  </div>

  <hr class="section-divider">

  <h2>The Portfolio of a Flourishing Human</h2>
  <p>This framework is not just for civilizations. It is a guide for life. Consider the state of your own vitality through this lens.</p>
  <p>A person focused only on Material Capital ends up with a large house full of possessions but with decaying health, no new skills, and few true friends. A person focused only on Intelligence Capital becomes the brilliant academic, celebrated but physically unhealthy, socially isolated, and incapable of adapting. A person focused only on Network Capital is the ultimate socialite, knowing everyone but having no deep skills or material stability. A person focused only on Diversity Capital is the dilettante, dabbling in everything but mastering nothing.</p>

  <div class="pullquote">
    <p>A flourishing human, like a flourishing civilization, does not maximize one capital. They cultivate a balanced portfolio. The multiplication principle is unforgiving. A zero in any category leads to a life that, despite its apparent successes, feels fundamentally broken.</p>
  </div>

  <p>The search for meaning, connection, and growth is the subjective experience of a thriving MIND portfolio.</p>

  <h2>Personal Scale</h2>
  <p>Toggle between the civilization and individual views. The same multiplicative logic applies at every scale &mdash; zero your health, zero your relationships, and everything else becomes meaningless.</p>
  <div class="panel">
    <div class="scale-toggle">
      <span style="font-weight:600" id="scaleLeft">Civilization</span>
      <div class="toggle-switch" id="scaleToggle"><div class="toggle-knob"></div></div>
      <span style="font-weight:600" id="scaleRight">Individual</span>
    </div>
    <p id="scaleNote" style="font-size:0.9rem;color:#555;text-align:center;">The same multiplicative logic applies at every scale. Zero your health, zero your relationships &mdash; everything else becomes meaningless.</p>
  </div>

  <hr class="section-divider">
  <p style="font-size:0.9rem; color:#888; text-align:center;">A system that can answer <em>yes</em> to all four questions is a system built to last. A system that cannot is a system already dying. It just has not read its own autopsy report yet.</p>
</div>

<script>
const DEFAULTS = { M: 70, I: 70, N: 70, D: 70 };
const LOW_THRESHOLD = 30;
const state = { M: 70, I: 70, N: 70, D: 70, isMultiplicative: false, isPersonal: false };
const colors = { M: '#ef4444', I: '#2563eb', N: '#22c55e', D: '#f59e0b' };
const civLabels = {
  civ: { M: 'Material Capital', I: 'Intellectual Capital', N: 'Natural Capital', D: 'Democratic Capital' },
  personal: { M: 'Health', I: 'Skills / Knowledge', N: 'Relationships / Trust', D: 'Diverse Pursuits / Options' }
};
const civData = {
  venice:    { M: 65, I: 75, N: 60, D: 55, desc: 'Venice 1400: A maritime republic with strong trade networks, artistic brilliance, and oligarchic governance. Balanced but not exceptional in any dimension.' },
  song:      { M: 80, I: 85, N: 65, D: 40, desc: 'Song Dynasty 1100: Technological marvel with printing, gunpowder, and compass. Weak democratic capital made it vulnerable to external conquest.' },
  soviet:    { M: 75, I: 80, N: 55, D: 15, desc: 'Soviet Union 1970: Industrial and scientific power hollowed by democratic deficit. The multiplicative model reveals the collapse the additive model hides.' },
  costarica: { M: 55, I: 70, N: 80, D: 75, desc: 'Costa Rica 2020: Modest material wealth but exceptional natural and democratic capital. Abolished its army in 1948 and invested in education and ecology.' },
  usa:       { M: 85, I: 80, N: 45, D: 50, desc: 'USA 2024: Enormous material and intellectual capital, but declining natural capital and democratic erosion create fragility.' },
  custom:    { M: 70, I: 70, N: 70, D: 70, desc: 'Custom: Drag the dials to explore your own scenario.' }
};

// ===== Dial Drawing =====
function createDial(svgId, key) {
  const svg = d3.select('#' + svgId);
  const cx = 80, cy = 80, r = 60;
  const startAngle = -Math.PI * 0.75;
  const endAngle = Math.PI * 0.75;
  const arc = d3.arc().innerRadius(r - 12).outerRadius(r).startAngle(startAngle);

  // Background arc
  svg.append('path')
    .attr('d', arc({ endAngle: endAngle }))
    .attr('transform', `translate(${cx},${cy})`)
    .attr('fill', '#e5e5e0');

  // Value arc
  const valueArc = svg.append('path')
    .attr('class', 'value-arc')
    .attr('transform', `translate(${cx},${cy})`)
    .attr('fill', colors[key]);

  // Handle
  const handle = svg.append('circle')
    .attr('r', 8).attr('fill', colors[key]).attr('stroke', 'white').attr('stroke-width', 2).attr('cursor', 'grab');

  function updateDial(val) {
    const t = val / 100;
    const angle = startAngle + t * (endAngle - startAngle);
    valueArc.attr('d', arc({ endAngle: angle }));
    handle.attr('cx', cx + Math.cos(angle - Math.PI / 2) * (r - 6))
           .attr('cy', cy + Math.sin(angle - Math.PI / 2) * (r - 6));
  }

  // Drag
  const drag = d3.drag().on('drag', function(event) {
    const dx = event.x - cx, dy = event.y - cy;
    let angle = Math.atan2(dy, dx) + Math.PI / 2;
    if (angle > Math.PI) angle -= Math.PI * 2;
    let t = (angle - startAngle) / (endAngle - startAngle);
    t = Math.max(0, Math.min(1, t));
    const val = Math.round(t * 100);
    state[key] = val;
    updateDial(val);
    document.getElementById('val' + key).textContent = val;
    updateVitality();
  });
  handle.call(drag);

  updateDial(state[key]);
  return updateDial;
}

const dialUpdaters = {};
['M', 'I', 'N', 'D'].forEach(k => { dialUpdaters[k] = createDial('dial' + k, k); });

function setDials(m, i, n, d, animate) {
  const targets = { M: m, I: i, N: n, D: d };
  if (animate) {
    const start = { M: state.M, I: state.I, N: state.N, D: state.D };
    const duration = 600;
    const t0 = performance.now();
    function tick(now) {
      const p = Math.min(1, (now - t0) / duration);
      const ease = p < 0.5 ? 2 * p * p : -1 + (4 - 2 * p) * p;
      ['M', 'I', 'N', 'D'].forEach(k => {
        state[k] = Math.round(start[k] + (targets[k] - start[k]) * ease);
        dialUpdaters[k](state[k]);
        document.getElementById('val' + k).textContent = state[k];
      });
      updateVitality();
      if (p < 1) requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);
  } else {
    ['M', 'I', 'N', 'D'].forEach(k => {
      state[k] = targets[k];
      dialUpdaters[k](targets[k]);
      document.getElementById('val' + k).textContent = targets[k];
    });
    updateVitality();
  }
}

function updateVitality() {
  const { M, I, N, D } = state;
  const product = M * I * N * D;
  const vitality = Math.round(product / 1e6);
  const maxVitality = 1e4; // 100^4 / 10^6
  const pct = vitality / maxVitality;

  document.getElementById('vitalityNum').textContent = vitality.toLocaleString();
  document.getElementById('vitalityFormula').textContent = `${M} × ${I} × ${N} × ${D} / 10⁶ = ${vitality.toLocaleString()}`;

  const fill = document.getElementById('healthFill');
  fill.style.width = (pct * 100) + '%';
  if (pct > 0.5) fill.style.background = '#22c55e';
  else if (pct > 0.25) fill.style.background = '#f59e0b';
  else if (pct > 0.05) fill.style.background = '#f97316';
  else fill.style.background = '#dc2626';

  const warn = document.getElementById('collapseWarn');
  if (M === 0 || I === 0 || N === 0 || D === 0) {
    const zero = [M === 0 && 'M', I === 0 && 'I', N === 0 && 'N', D === 0 && 'D'].filter(Boolean).join(', ');
    warn.textContent = 'CIVILIZATIONAL COLLAPSE -- A zero in any dimension nullifies everything';
  } else {
    warn.textContent = '';
  }

  // Multiplicative collapse warning banner
  const banner = document.getElementById('collapseBanner');
  const lowCount = [M, I, N, D].filter(v => v <= LOW_THRESHOLD).length;
  if (lowCount >= 2) {
    banner.classList.add('visible');
  } else {
    banner.classList.remove('visible');
  }

  updateModelDisplay();
}

// ===== Reset Button =====
document.getElementById('resetBtn').addEventListener('click', function() {
  document.querySelectorAll('.civ-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('civDesc').textContent = 'Select a civilization to explore its capital profile.';
  setDials(DEFAULTS.M, DEFAULTS.I, DEFAULTS.N, DEFAULTS.D, true);
});

// ===== Historical Civilizations =====
document.querySelectorAll('.civ-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    document.querySelectorAll('.civ-btn').forEach(b => b.classList.remove('active'));
    this.classList.add('active');
    const civ = civData[this.dataset.civ];
    setDials(civ.M, civ.I, civ.N, civ.D, true);
    document.getElementById('civDesc').textContent = civ.desc;
  });
});

// ===== Sum vs Product =====
document.getElementById('modelToggle').addEventListener('click', function() {
  state.isMultiplicative = !state.isMultiplicative;
  this.classList.toggle('right', state.isMultiplicative);
  updateModelDisplay();
});

function updateModelDisplay() {
  const { M, I, N, D } = state;
  const scoreEl = document.getElementById('modelScore');
  const verdictEl = document.getElementById('modelVerdict');
  const insightEl = document.getElementById('modelInsight');
  const chartEl = document.getElementById('barChart');

  if (!state.isMultiplicative) {
    const sum = M + I + N + D;
    const pct = Math.round(sum / 4);
    scoreEl.textContent = `${sum} / 400`;
    scoreEl.style.color = pct > 50 ? '#22c55e' : pct > 25 ? '#f59e0b' : '#dc2626';
    verdictEl.textContent = pct > 70 ? 'Strong' : pct > 50 ? `Doing OK (${pct}%)` : pct > 25 ? 'Struggling' : 'Critical';
    insightEl.textContent = 'The additive model hides single-point failures by averaging away collapse risks.';
  } else {
    const prod = Math.round(M * I * N * D / 1e6);
    const maxProd = 100; // 100^4 / 10^6
    const pct = Math.round(prod / maxProd * 100);
    scoreEl.textContent = prod.toLocaleString();
    scoreEl.style.color = pct > 30 ? '#22c55e' : pct > 10 ? '#f59e0b' : '#dc2626';
    verdictEl.textContent = pct > 50 ? 'Thriving' : pct > 20 ? 'Functional' : pct > 5 ? 'Critical Failure (below threshold)' : 'Collapse';
    insightEl.textContent = 'The multiplicative model reveals how a single weak dimension can drag the entire system into crisis.';
  }

  // Bar chart
  chartEl.innerHTML = '';
  const vals = [
    { label: state.isPersonal ? 'Health' : 'Material', v: M },
    { label: state.isPersonal ? 'Skills' : 'Intellectual', v: I },
    { label: state.isPersonal ? 'Relationships' : 'Natural', v: N },
    { label: state.isPersonal ? 'Options' : 'Democratic', v: D }
  ];
  const cs = [colors.M, colors.I, colors.N, colors.D];
  vals.forEach((d, i) => {
    const item = document.createElement('div');
    item.className = 'bar-item';
    const rect = document.createElement('div');
    rect.className = 'bar-rect';
    rect.style.height = (d.v * 1.1) + 'px';
    rect.style.background = cs[i];
    const lbl = document.createElement('div');
    lbl.className = 'bar-label';
    lbl.textContent = d.label;
    item.appendChild(rect);
    item.appendChild(lbl);
    chartEl.appendChild(item);
  });
}

// ===== Personal Scale =====
document.getElementById('scaleToggle').addEventListener('click', function() {
  state.isPersonal = !state.isPersonal;
  this.classList.toggle('right', state.isPersonal);
  const labels = state.isPersonal ? civLabels.personal : civLabels.civ;
  document.getElementById('labelM').textContent = labels.M;
  document.getElementById('labelI').textContent = labels.I;
  document.getElementById('labelN').textContent = labels.N;
  document.getElementById('labelD').textContent = labels.D;
  document.getElementById('scaleNote').textContent = state.isPersonal
    ? 'At the individual level: zero your health, skills, relationships, or options -- and everything else becomes meaningless. The math is the same.'
    : 'The same multiplicative logic applies at every scale. Zero your health, zero your relationships -- everything else becomes meaningless.';
  updateModelDisplay();
});

updateVitality();

// Reading progress
window.addEventListener('scroll', function() {
  var p = document.documentElement;
  var pct = p.scrollTop / (p.scrollHeight - p.clientHeight) * 100;
  document.getElementById('progress-bar').style.width = pct + '%';
});
</script>
</body>
</html>
